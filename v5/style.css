/* --- 基本設定と変数 --- */
:root {
    --primary-color: #3498db; --secondary-color: #f1f1f1; --font-color: #333;
    --background-color: #fff; --border-color: #ddd; --header-bg: #fff;
    --header-color: #000; --highlight-bg: #fff38a; --highlight-color: #000;
    --left-panel-width: 340px;
    --transition-speed: 0.3s;
}
body[data-theme='dark'] {
    --primary-color: #5dade2; --secondary-color: #2c3e50; --font-color: #ecf0f1;
    --background-color: #1c2833; --border-color: #34495e; --header-bg: #1c2833;
    --header-color: #ecf0f1; --highlight-bg: #f1c40f; --highlight-color: #333;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--background-color); color: var(--font-color); transition: background-color 0.3s, color 0.3s; overflow: hidden; }

/* --- PCレイアウト (CSS Grid) --- */
.container { display: grid; grid-template-columns: var(--left-panel-width) 1fr; height: 100vh; transition: grid-template-columns var(--transition-speed) ease; }
.left-panel { min-width: var(--left-panel-width); height: 100vh; overflow-y: auto; padding: 20px; border-right: 1px solid var(--border-color); display: flex; flex-direction: column; gap: 15px; transition: visibility 0s, padding var(--transition-speed) ease, border var(--transition-speed) ease; }
.main-content-wrapper { display: grid; grid-template-rows: auto 1fr; height: 100vh; overflow: hidden; position: relative; }

/* 左パネル折りたたみ */
.container.left-panel-collapsed { grid-template-columns: 0 1fr; }
.container.left-panel-collapsed .left-panel { visibility: hidden; padding: 0; border-right-width: 0; }
#panel-toggle-btn { position: absolute; top: 8px; left: 10px; z-index: 2000; background: var(--secondary-color); border: 1px solid var(--border-color); border-radius: 5px; width: 32px; height: 32px; font-size: 1.2rem; cursor: pointer; color: var(--font-color); }
#panel-toggle-btn:hover { background: var(--primary-color); color: white; }

/* --- ヘッダー --- */
header { display: flex; width: 100%; height: 48px; background-color: var(--header-bg); color: var(--font-color); align-items: center; justify-content: center; padding: 0 20px; border-bottom: 1px solid var(--border-color); z-index: 1000; }
.header-title { font-size: 1.2rem; font-weight: bold; }
/* ★★ #syou のスタイルは不要になったため削除 ★★ */

/* --- メインコンテンツ --- */
main {
    overflow-y: auto;
    padding: 20px;
    -ms-overflow-style: none;
    scrollbar-width: none;
}
main::-webkit-scrollbar, .left-panel::-webkit-scrollbar {
    display: none;
}
.left-panel {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

.loader { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #888; padding: 50px 20px; }
.spinner { border: 4px solid var(--secondary-color); border-top: 4px solid var(--primary-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin-bottom: 15px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* 聖書本文エリア */
.bible-display-area { display: grid; grid-template-columns: 1fr 1fr; gap: 0 25px; }
.verse-container { display: flex; flex-direction: column; align-items: flex-start; gap: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); position: relative; height: 100%; }
.verse-header { display: flex; align-items: center; }
.verse-ref { color: var(--primary-color); font-weight: bold; width: auto; }
.verse-text { flex-grow: 1; overflow-wrap: break-word; }
.bookmark-icon { cursor: pointer; font-style: normal; color: var(--primary-color); margin-left: 8px; display: inline-block; transition: transform 0.2s; }
.copy-icon { position: absolute; top: 0px; right: 0; cursor: pointer; font-size: 18px; color: var(--border-color); opacity: 0; transition: opacity 0.2s, color 0.2s; }
.verse-container:hover .copy-icon { opacity: 1; }
.copy-icon:hover { color: var(--primary-color); }

/* --- 検索結果 --- */
#search-results { padding-top: 20px; }
.search-result-item { padding: 12px; border: 1px solid var(--border-color); border-radius: 5px; margin-bottom: 10px; cursor: pointer; transition: background-color 0.2s; }
.search-result-item:hover { background-color: var(--secondary-color); }
.search-result-item .verse-ref { color: var(--font-color); font-size: 0.9em; margin-bottom: 8px; }
.search-result-item .verse-content { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

/* --- 左パネル内コンテンツ --- */
.panel-section { border: 1px solid var(--border-color); border-radius: 8px; padding: 15px; }
.panel-section h2 { margin: 0 0 15px 0; padding-bottom: 10px; font-size: 1.1rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; position: relative; }
.control-group { margin-bottom: 15px; }
label { display: block; margin-bottom: 8px; font-weight: 500;}
select, input[type="search"], input[type="text"], .action-btn { width: 100%; padding: 10px; font-size: 16px; border: 1px solid var(--border-color); background-color: var(--secondary-color); color: var(--font-color); border-radius: 5px; }
.action-btn { background-color: var(--primary-color); color: white; border: none; cursor: pointer; margin-top: 10px; }
.navigation-buttons { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px; margin-top: 15px; }
.navigation-buttons button { background: none; border: 1px solid var(--border-color); color: var(--primary-color); font-size: 1.2rem; font-weight: bold; cursor: pointer; padding: 8px; border-radius: 5px; transition: background-color 0.2s; width: 100%; }
.navigation-buttons button:hover { background-color: var(--secondary-color); }
.navigation-buttons button:disabled { color: var(--border-color); cursor: not-allowed; }

/* ショートカットキーチップ */
.shortcut-tip { font-size: 0.7em; font-weight: normal; color: var(--font-color); background-color: var(--secondary-color); border: 1px solid var(--border-color); border-radius: 4px; padding: 2px 6px; }
.switch-container { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
.switch-container .shortcut-tip { order: -1; margin-right: auto; margin-left: 10px; }

/* --- 設定 --- */
.settings summary { cursor: pointer; list-style: none; }
.settings summary::-webkit-details-marker { display: none; }
.settings h2 { border-bottom: none; margin-bottom: 0; }
.settings[open] h2 { border-bottom: 1px solid var(--border-color); margin-bottom: 15px;}
.settings .settings-content { padding-top: 5px; }
.switch-container .switch { margin-left: 10px; }
.switch { position: relative; display: inline-block; width: 44px; height: 24px; flex-shrink: 0; }
.switch input { display:none; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px; }
.slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--primary-color); }
input:checked + .slider:before { transform: translateX(20px); }
.highlight { background-color: var(--highlight-bg); color: var(--highlight-color); border-radius: 3px; }

/* --- ルビ --- */
.jp, .ch, .verse-text { line-height: 1.8; }
ruby { ruby-position: over; }
rt { font-size: 0.6em; }
rt.furigana { color:#f2d26b; }
rt.pinyin { color:#f199a2; font-style: italic; }

/* --- 履歴/ブックマークセクション --- */
.tabs { display: flex; margin-bottom: 10px; }
.tab-button { flex: 1; padding: 10px; background-color: var(--secondary-color); border: 1px solid var(--border-color); border-bottom: none; cursor: pointer; color: var(--font-color); }
.tab-button.active { background-color: var(--background-color); border-bottom: 1px solid var(--background-color); }
.tab-content { display: none; max-height: 150px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 0 0 5px 5px; }
.tab-content.active { display: block; }
.user-data-section ul { list-style: none; padding: 0; margin: 0; }
.user-data-section li { padding: 10px 15px; cursor: pointer; border-bottom: 1px solid var(--border-color); font-size: 0.9em; }
.user-data-section li:last-child { border-bottom: none; }
.user-data-section li:hover { background-color: var(--secondary-color); }
.user-data-section .empty-message { padding: 20px; text-align: center; color: #888; }